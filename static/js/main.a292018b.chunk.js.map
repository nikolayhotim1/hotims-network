{"version":3,"sources":["components/common/FormsControls/FormsControls.module.css","assets/images/preloader.svg","components/common/Preloader/Preloader.tsx","components/Profile/MyPosts/MyPosts.module.css","utils/validators/validators.ts","components/Profile/ProfileInfo/ProfileStatus.module.css","redux/dialogsReducer.ts","assets/images/computer-user-icon.png","utils/helpers/objectHelper.ts","api/usersAPI.ts","redux/usersReducer.ts","api/chatAPI.ts","redux/chatReducer.ts","components/Profile/MyPosts/Post/Post.module.css","api/api.ts","redux/appReducer.ts","api/profileAPI.ts","redux/profileReducer.ts","redux/reduxStore.ts","redux/authSelectors.ts","components/Header/Header.tsx","assets/images/the-codefather.png","components/Profile/ProfileInfo/ProfileStatus.tsx","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","assets/images/the-codefather-2.png","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPostsForm.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx","hocs/withRouter.tsx","App.tsx","index.tsx","components/common/FormsControls/FormsControls.tsx","components/Profile/ProfileInfo/ProfileInfo.module.css","api/securityAPI.ts","api/authAPI.ts","redux/authReducer.ts"],"names":["module","exports","Preloader","src","preloader","alt","required","value","maxLengthCreator","maxLength","length","initialState","dialogs","id","name","messages","message","actions","sendMessage","newMessageText","type","dialogsReduser","state","action","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","usersAPI","getNewFollowedUser","userId","instance","post","response","data","getNewUnfollowedUser","delete","getUsers","page","pageSize","term","friend","friendData","get","users","currentPage","filter","totalUsersCount","isFetching","followingInProgress","payload","_followUnfollowFlow","dispatch","apiMethod","actionCreator","a","resultCode","follow","bind","unfollow","requestUsers","totalCount","usersReducer","followed","subcribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","forEach","s","openHandler","errorHandler","console","error","cleanUp","removeEventListener","status","close","WebSocket","addEventListener","chatAPI","eventName","callback","push","send","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","stopMessagesListening","chatReducer","m","v1","index","array","ResultCodesEnum","ResultCodeForCaptchaEnum","axios","create","withCredentials","baseURL","headers","initialized","appReduser","profileAPI","put","file","formData","FormData","append","profile","posts","likesCount","addPost","newPostText","deletePost","postId","setUserProfile","setUserStatus","savePhotoSuccess","photos","getUserProfile","profileReducer","p","rootReducer","combineReducers","profilePage","chat","chatReduser","dialogsPage","dialogsReducer","usersPage","auth","authReducer","form","formReducer","app","appReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","selectIsAuth","isAuth","selectCurrentUserLogin","login","selectCurrentUserId","Header","useSelector","userPhoto","navigate","useNavigate","useDispatch","Layout","className","span","theme","mode","defaultSelectedKeys","Item","to","icon","UserOutlined","onClick","style","color","logout","ProfileStatus","props","useState","editMode","setEditMode","setStatus","useEffect","isOwner","owner_status","placeholder","onChange","currentTarget","autoFocus","onBlur","getUpdateStatus","reduxForm","handleSubmit","info","onSubmit","createField","Input","Textarea","style2","formSummaryError","contacts","Object","keys","key","ProfileData","activateEditMode","fullName","item","aboutMe","lookingForAJob","lookingForAJobDescription","contactTitle","contactValue","Contact","ProfileInfo","savePhoto","saveProfile","main_image","mainImage","profile_wrapper","avatar","large","target","files","initialValues","then","Post","postImage","maxLength100","new_post","MyPosts","postsElements","my_posts","values","connect","Profile","MyPostsContainer","ProfileContainer","isShowMyProfile","userIdFromPath","this","router","params","authorisedUserId","getUserStatus","setState","Component","ProfileContainerCompose","location","useLocation","useParams","log","getState","Error","stopSubmit","_error","Promise","reject","SubMenu","Menu","Content","Footer","Sider","ChatPage","lazy","default","DialogsContainer","UsersPage","LoginPage","App","catchAllUnhandledErrors","reason","promise","initializeApp","padding","margin","width","height","title","NotificationOutlined","LaptopOutlined","minHeight","fallback","path","element","pageTitle","textAlign","AppContainer","getAuthUserData","all","MainApp","ReactDOM","render","document","getElementById","FormsControl","meta","touched","children","hasError","form_control","input","component","validators","text","validate","securityAPI","authAPI","email","password","rememberMe","captcha","captchaURL","Success","CaptchaIsRequired","getCaptchaURL","url","authReduser"],"mappings":"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","file":"static/js/main.a292018b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_control\":\"FormsControls_form_control__24tnZ\",\"error\":\"FormsControls_error__2lhvj\"};","export default __webpack_public_path__ + \"static/media/preloader.86e365cf.svg\";","import { FC } from 'react'\r\nimport preloader from './../../../assets/images/preloader.svg'\r\nconst Preloader: FC = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<img src={preloader} alt='Preloader' />\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default Preloader\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"my_posts\":\"MyPosts_my_posts__3fZVC\",\"posts\":\"MyPosts_posts__744TF\"};","export type FieldValidatorType = (value: string) => string | undefined\r\nexport const required: FieldValidatorType = value => {\r\n\tif (value) return undefined\r\n\treturn 'Field is required'\r\n}\r\nexport const maxLengthCreator =\r\n\t(maxLength: number): FieldValidatorType =>\r\n\tvalue => {\r\n\t\tif (value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n\t\treturn undefined\r\n\t}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"ProfileStatus_status__27AVK\",\"owner_status\":\"ProfileStatus_owner_status__29g72\"};","import { DialogType, MessageType } from './../types/types'\r\nimport { InferActionsTypes } from './reduxStore'\r\nconst initialState = {\r\n\tdialogs: [\r\n\t\t{ id: 1, name: 'Andrey' },\r\n\t\t{ id: 2, name: 'Denis' },\r\n\t\t{ id: 3, name: 'Katya' }\r\n\t] as Array<DialogType>,\r\n\tmessages: [\r\n\t\t{ id: 1, message: 'Hi!' },\r\n\t\t{ id: 2, message: 'How are you?' },\r\n\t\t{ id: 3, message: 'Yo!' }\r\n\t] as Array<MessageType>\r\n}\r\nexport type InitialStateType = typeof initialState\r\nexport const actions = {\r\n\tsendMessage: (newMessageText: string) =>\r\n\t\t({\r\n\t\t\ttype: 'hotims-network/dialogsReduser/SEND-MESSAGE',\r\n\t\t\tnewMessageText\r\n\t\t} as const)\r\n}\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\nconst dialogsReduser = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'hotims-network/dialogsReduser/SEND-MESSAGE': {\r\n\t\t\treturn { ...state, messages: [...state.messages, { id: 4, message: action.newMessageText }] }\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport default dialogsReduser\r\n","export default \"data:image/png;base64,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\"","export const updateObjectInArray = (items: any, itemId: any, objPropName: any, newObjProps: any) => {\r\n\treturn items.map((u: any) => {\r\n\t\tif (u[objPropName] === itemId) {\r\n\t\t\treturn { ...u, ...newObjProps }\r\n\t\t}\r\n\t\treturn u\r\n\t})\r\n}\r\n","import { instance, GetItemsType, APIResponseType } from './api'\r\nexport const usersAPI = {\r\n\tasync getNewFollowedUser(userId: number) {\r\n\t\tconst response = await instance.post<APIResponseType>(`follow/${userId}`, {})\r\n\t\treturn response.data\r\n\t},\r\n\tasync getNewUnfollowedUser(userId: number) {\r\n\t\tconst response = await instance.delete(`follow/${userId}`)\r\n\t\treturn response.data as Promise<APIResponseType>\r\n\t},\r\n\tasync getUsers(page: number, pageSize: number, term: string = '', friend: null | boolean = null) {\r\n\t\tconst friendData = friend === null ? '' : `&friend=${friend}`\r\n\t\tconst response = await instance.get<GetItemsType>(`users?page=${page}&count=${pageSize}&term=${term}${friendData}`)\r\n\t\treturn response.data\r\n\t}\r\n}\r\n","import { APIResponseType } from './../api/api'\r\nimport { BaseThunkType, InferActionsTypes } from './reduxStore'\r\nimport { UserType } from '../types/types'\r\nimport { updateObjectInArray } from '../utils/helpers/objectHelper'\r\nimport { Dispatch } from 'redux'\r\nimport { usersAPI } from '../api/usersAPI'\r\nconst initialState = {\r\n\tusers: [] as Array<UserType>,\r\n\tpageSize: 10,\r\n\tcurrentPage: 1,\r\n\tfilter: {\r\n\t\tterm: '',\r\n\t\tfriend: null as null | boolean\r\n\t},\r\n\ttotalUsersCount: 0,\r\n\tisFetching: false,\r\n\tfollowingInProgress: [] as Array<number>\r\n}\r\nexport type InitialStateType = typeof initialState\r\nexport type FilterType = typeof initialState.filter\r\nexport const actions = {\r\n\tfollowSuccess: (userId: number) => ({ type: 'FOLLOW', userId } as const),\r\n\tunfollowSuccess: (userId: number) => ({ type: 'UNFOLLOW', userId } as const),\r\n\tsetUsers: (users: Array<UserType>) => ({ type: 'SET_USERS', users } as const),\r\n\tsetCurrentPage: (currentPage: number) => ({ type: 'SET_CURRENT_PAGE', currentPage } as const),\r\n\tsetFilter: (filter: FilterType) => ({ type: 'SET_FILTER', payload: filter } as const),\r\n\tsetTotalUsersCount: (totalUsersCount: number) => ({ type: 'SET_TOTAL_USERS_COUNT', totalUsersCount } as const),\r\n\ttoggleIsFetching: (isFetching: boolean) => ({ type: 'TOGGLE_IS_FETCHING', isFetching } as const),\r\n\ttoggleIsFollowingProgress: (isFetching: boolean, userId: number) =>\r\n\t\t({ type: 'TOGGLE_IS_FOLLOWING_PROGRESS', isFetching, userId } as const)\r\n}\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\nconst usersReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'FOLLOW': {\r\n\t\t\treturn { ...state, users: updateObjectInArray(state.users, action.userId, 'id', { followed: true }) }\r\n\t\t}\r\n\t\tcase 'UNFOLLOW': {\r\n\t\t\treturn { ...state, users: updateObjectInArray(state.users, action.userId, 'id', { followed: false }) }\r\n\t\t}\r\n\t\tcase 'SET_USERS': {\r\n\t\t\treturn { ...state, users: action.users }\r\n\t\t}\r\n\t\tcase 'SET_CURRENT_PAGE': {\r\n\t\t\treturn { ...state, currentPage: action.currentPage }\r\n\t\t}\r\n\t\tcase 'SET_FILTER': {\r\n\t\t\treturn { ...state, filter: action.payload }\r\n\t\t}\r\n\t\tcase 'SET_TOTAL_USERS_COUNT': {\r\n\t\t\treturn { ...state, totalUsersCount: action.totalUsersCount }\r\n\t\t}\r\n\t\tcase 'TOGGLE_IS_FETCHING': {\r\n\t\t\treturn { ...state, isFetching: action.isFetching }\r\n\t\t}\r\n\t\tcase 'TOGGLE_IS_FOLLOWING_PROGRESS': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tfollowingInProgress: action.isFetching\r\n\t\t\t\t\t? [...state.followingInProgress, action.userId]\r\n\t\t\t\t\t: state.followingInProgress.filter(id => id !== action.userId)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nconst _followUnfollowFlow = async (\r\n\tdispatch: Dispatch<ActionsTypes>,\r\n\tuserId: number,\r\n\tapiMethod: (userId: number) => Promise<APIResponseType>,\r\n\tactionCreator: (userId: number) => ActionsTypes\r\n) => {\r\n\tdispatch(actions.toggleIsFollowingProgress(true, userId))\r\n\tconst data = await apiMethod(userId)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(actionCreator(userId))\r\n\t}\r\n\tdispatch(actions.toggleIsFollowingProgress(false, userId))\r\n}\r\ntype ThunkType = BaseThunkType<ActionsTypes>\r\nexport const follow = (userId: number): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tawait _followUnfollowFlow(dispatch, userId, usersAPI.getNewFollowedUser.bind(userId), actions.followSuccess)\r\n\t}\r\n}\r\nexport const unfollow = (userId: number): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tawait _followUnfollowFlow(dispatch, userId, usersAPI.getNewUnfollowedUser.bind(userId), actions.unfollowSuccess)\r\n\t}\r\n}\r\nexport const requestUsers = (page: number, pageSize: number, filter: FilterType): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tdispatch(actions.toggleIsFetching(true))\r\n\t\tdispatch(actions.setCurrentPage(page))\r\n\t\tdispatch(actions.setFilter(filter))\r\n\t\tconst data = await usersAPI.getUsers(page, pageSize, filter.term, filter.friend)\r\n\t\tdispatch(actions.toggleIsFetching(false))\r\n\t\tdispatch(actions.setUsers(data.items))\r\n\t\tdispatch(actions.setTotalUsersCount(data.totalCount))\r\n\t}\r\n}\r\nexport default usersReducer\r\n","export type ChatMessageAPIType = {\r\n\tmessage: string\r\n\tphoto: string\r\n\tuserId: number\r\n\tuserName: string\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error'\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\nconst subcribers = {\r\n\t'messages-received': [] as MessagesReceivedSubscriberType[],\r\n\t'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\nlet ws: WebSocket | null = null\r\ntype EventsNamesType = 'messages-received' | 'status-changed'\r\nconst closeHandler = () => {\r\n\tnotifySubscribersAboutStatus('pending')\r\n\tsetTimeout(createChannel, 3000)\r\n}\r\nconst messageHandler = (e: MessageEvent) => {\r\n\tconst newMessages = JSON.parse(e.data)\r\n\tsubcribers['messages-received'].forEach(s => s(newMessages))\r\n}\r\nconst openHandler = () => {\r\n\tnotifySubscribersAboutStatus('ready')\r\n}\r\nconst errorHandler = () => {\r\n\tnotifySubscribersAboutStatus('error')\r\n\tconsole.error('REFRESH PAGE')\r\n}\r\nconst cleanUp = () => {\r\n\tws?.removeEventListener('close', closeHandler)\r\n\tws?.removeEventListener('message', messageHandler)\r\n\tws?.removeEventListener('open', openHandler)\r\n\tws?.removeEventListener('error', errorHandler)\r\n}\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n\tsubcribers['status-changed'].forEach(s => s(status))\r\n}\r\nconst createChannel = () => {\r\n\tcleanUp()\r\n\tws?.close()\r\n\tws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n\tnotifySubscribersAboutStatus('pending')\r\n\tws.addEventListener('close', closeHandler)\r\n\tws.addEventListener('message', messageHandler)\r\n\tws.addEventListener('open', openHandler)\r\n\tws.addEventListener('error', errorHandler)\r\n}\r\nexport const chatAPI = {\r\n\tstart() {\r\n\t\tcreateChannel()\r\n\t},\r\n\tstop() {\r\n\t\tsubcribers['messages-received'] = []\r\n\t\tsubcribers['status-changed'] = []\r\n\t\tcleanUp()\r\n\t\tws?.close()\r\n\t},\r\n\tsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n\t\t// @ts-ignore\r\n\t\tsubcribers[eventName].push(callback)\r\n\t\treturn () => {\r\n\t\t\t// @ts-ignore\r\n\t\t\tsubcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n\t\t}\r\n\t},\r\n\tunsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n\t\t// @ts-ignore\r\n\t\tsubcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n\t},\r\n\tsendMessage(message: string) {\r\n\t\tws?.send(message)\r\n\t\tcreateChannel()\r\n\t}\r\n}\r\n","import { BaseThunkType, InferActionsTypes } from './reduxStore'\r\nimport { Dispatch } from 'redux'\r\nimport { FormAction } from 'redux-form/lib/actions'\r\nimport { chatAPI, ChatMessageAPIType, StatusType } from '../api/chatAPI'\r\nimport { v1 } from 'uuid'\r\ntype ChatMessageType = ChatMessageAPIType & { id: string }\r\nconst initialState = {\r\n\tmessages: [] as ChatMessageType[],\r\n\tstatus: 'pending' as StatusType\r\n}\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'hotims-network/chatReduser/MESSAGES_RECEVIED':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessages: [...state.messages, ...action.payload.messages.map(m => ({ ...m, id: v1() }))].filter(\r\n\t\t\t\t\t(m, index, array) => index >= array.length - 100\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\tcase 'hotims-network/chatReduser/STATUS_CHANGED':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus: action.payload.status\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport const actions = {\r\n\tmessagesReceived: (messages: ChatMessageAPIType[]) =>\r\n\t\t({\r\n\t\t\ttype: 'hotims-network/chatReduser/MESSAGES_RECEVIED',\r\n\t\t\tpayload: { messages }\r\n\t\t} as const),\r\n\tstatusChanged: (status: StatusType) =>\r\n\t\t({\r\n\t\t\ttype: 'hotims-network/chatReduser/STATUS_CHANGED',\r\n\t\t\tpayload: { status }\r\n\t\t} as const)\r\n}\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n\tif (_newMessageHandler === null) {\r\n\t\t_newMessageHandler = messages => {\r\n\t\t\tdispatch(actions.messagesReceived(messages))\r\n\t\t}\r\n\t}\r\n\treturn _newMessageHandler\r\n}\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n\tif (_statusChangedHandler === null) {\r\n\t\t_statusChangedHandler = status => {\r\n\t\t\tdispatch(actions.statusChanged(status))\r\n\t\t}\r\n\t}\r\n\treturn _statusChangedHandler\r\n}\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>\r\nexport const startMessagesListening = (): ThunkType => async dispatch => {\r\n\tchatAPI.start()\r\n\tchatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n\tchatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n}\r\nexport const stopMessagesListening = (): ThunkType => async dispatch => {\r\n\tchatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n\tchatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n\tchatAPI.stop()\r\n}\r\nexport const sendMessage =\r\n\t(message: string): ThunkType =>\r\n\tasync dispatch => {\r\n\t\tchatAPI.sendMessage(message)\r\n\t}\r\nexport default chatReducer\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__28jQv\"};","import { UserType } from './../types/types'\r\nimport axios from 'axios'\r\nexport const instance = axios.create({\r\n\twithCredentials: true,\r\n\tbaseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n\theaders: {\r\n\t\t'API-KEY': '7d7c0cc8-9365-47ef-8d77-ea42e5daa598'\r\n\t}\r\n})\r\nexport enum ResultCodesEnum {\r\n\tSuccess = 0,\r\n\tError = 1\r\n}\r\nexport enum ResultCodeForCaptchaEnum {\r\n\tCaptchaIsRequired = 10\r\n}\r\nexport type GetItemsType = {\r\n\titems: Array<UserType>\r\n\ttotalCount: number\r\n\terror: string | null\r\n}\r\nexport type APIResponseType<D = {}, RC = ResultCodesEnum> = {\r\n\tdata: D\r\n\tresultCode: RC\r\n\tmessages: Array<string>\r\n}\r\n","import { InferActionsTypes } from './reduxStore'\r\nimport { getAuthUserData } from './authReducer'\r\nconst initialState = {\r\n\tinitialized: false\r\n}\r\ntype InitialStateType = typeof initialState\r\nconst actions = {\r\n\tinitializedSuccess: () => ({ type: 'hotims-network/appReduser/INITIALIZED_SUCCESS' } as const)\r\n}\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\nconst appReduser = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'hotims-network/appReduser/INITIALIZED_SUCCESS': {\r\n\t\t\treturn { ...state, initialized: true }\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport const initializeApp = () => {\r\n\treturn (dispatch: any) => {\r\n\t\tconst promise = dispatch(getAuthUserData())\r\n\t\tPromise.all([promise]).then(() => {\r\n\t\t\tdispatch(actions.initializedSuccess())\r\n\t\t})\r\n\t}\r\n}\r\nexport default appReduser\r\n","import { PhotosType } from './../types/types'\r\nimport { ProfileType } from '../types/types'\r\nimport { instance, APIResponseType } from './api'\r\ntype SavePhotoResponseDataType = {\r\n\tphotos: PhotosType\r\n}\r\nexport const profileAPI = {\r\n\tasync getUserProfile(userId: number) {\r\n\t\tconst response = await instance.get<ProfileType>(`profile/${userId}`)\r\n\t\treturn response.data\r\n\t},\r\n\tasync getUserStatus(userId: number) {\r\n\t\tconst response = await instance.get<string>(`profile/status/${userId}`)\r\n\t\treturn response.data\r\n\t},\r\n\tasync getUpdateStatus(status: string) {\r\n\t\tconst response = await instance.put<APIResponseType>('profile/status', {\r\n\t\t\tstatus: status\r\n\t\t})\r\n\t\treturn response.data\r\n\t},\r\n\tasync savePhoto(file: File) {\r\n\t\tconst formData = new FormData()\r\n\t\tformData.append('image', file)\r\n\t\tconst response = await instance.put<APIResponseType<SavePhotoResponseDataType>>('profile/photo', formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn response.data\r\n\t},\r\n\tasync saveProfile(profile: ProfileType) {\r\n\t\tconst response = await instance.put<APIResponseType>('profile', profile)\r\n\t\treturn response.data\r\n\t}\r\n}\r\n","import { BaseThunkType, InferActionsTypes } from './reduxStore'\r\nimport { PhotosType, PostType, ProfileType } from '../types/types'\r\nimport { FormAction, stopSubmit } from 'redux-form'\r\nimport { profileAPI } from '../api/profileAPI'\r\nconst initialState = {\r\n\tposts: [\r\n\t\t{ id: 1, message: \"It's my first post.\", likesCount: 15 },\r\n\t\t{ id: 2, message: 'Forza Juve!', likesCount: 30 }\r\n\t] as Array<PostType>,\r\n\tprofile: null as ProfileType | null,\r\n\tstatus: ''\r\n}\r\ntype InitialStateType = typeof initialState\r\nexport const actions = {\r\n\taddPost: (newPostText: string) => ({ type: 'hotims-network/profileReducer/ADD-POST', newPostText } as const),\r\n\tdeletePost: (postId: number) => ({ type: 'hotims-network/profileReducer/DELETE_POST', postId } as const),\r\n\tsetUserProfile: (profile: ProfileType) => ({ type: 'hotims-network/profileReducer/SET_USER_PROFILE', profile } as const),\r\n\tsetUserStatus: (status: string) => ({ type: 'hotims-network/profileReducer/SET_USER_STATUS', status } as const),\r\n\tsavePhotoSuccess: (photos: PhotosType) => ({ type: 'hotims-network/profileReducer/SAVE_PHOTO_SUCCESS', photos } as const)\r\n}\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\nconst profileReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'hotims-network/profileReducer/ADD-POST': {\r\n\t\t\treturn { ...state, posts: [...state.posts, { id: 3, message: action.newPostText, likesCount: 0 }] }\r\n\t\t}\r\n\t\tcase 'hotims-network/profileReducer/DELETE_POST': {\r\n\t\t\treturn { ...state, posts: state.posts.filter(p => p.id !== action.postId) }\r\n\t\t}\r\n\t\tcase 'hotims-network/profileReducer/SET_USER_PROFILE': {\r\n\t\t\treturn { ...state, profile: action.profile }\r\n\t\t}\r\n\t\tcase 'hotims-network/profileReducer/SET_USER_STATUS': {\r\n\t\t\treturn { ...state, status: action.status }\r\n\t\t}\r\n\t\tcase 'hotims-network/profileReducer/SAVE_PHOTO_SUCCESS': {\r\n\t\t\treturn { ...state, profile: { ...state.profile, photos: action.photos } as ProfileType }\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\ntype ThunkType = BaseThunkType<ActionsTypes | FormAction>\r\nexport const getUserProfile = (userId: number): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tconst data = await profileAPI.getUserProfile(userId)\r\n\t\tdispatch(actions.setUserProfile(data))\r\n\t}\r\n}\r\nexport const getUserStatus = (userId: number): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tconst data = await profileAPI.getUserStatus(userId)\r\n\t\tdispatch(actions.setUserStatus(data))\r\n\t}\r\n}\r\nexport const getUpdateStatus = (status: string): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\ttry {\r\n\t\t\tconst data = await profileAPI.getUpdateStatus(status)\r\n\t\t\tif (data.resultCode === 0) {\r\n\t\t\t\tdispatch(actions.setUserStatus(status))\r\n\t\t\t}\r\n\t\t} catch (error: any) {\r\n\t\t\tconsole.log(error.message)\r\n\t\t}\r\n\t}\r\n}\r\nexport const savePhoto = (file: File): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tconst data = await profileAPI.savePhoto(file)\r\n\t\tif (data.resultCode === 0) {\r\n\t\t\tdispatch(actions.savePhotoSuccess(data.data.photos))\r\n\t\t}\r\n\t}\r\n}\r\nexport const saveProfile = (profile: ProfileType): ThunkType => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst userId = getState().auth.id\r\n\t\tconst data = await profileAPI.saveProfile(profile)\r\n\t\tif (data.resultCode === 0) {\r\n\t\t\tif (userId !== null) {\r\n\t\t\t\tdispatch(getUserProfile(userId))\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"userId can't be null\")\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdispatch(stopSubmit('editProfile', { _error: data.messages[0] }))\r\n\t\t\treturn Promise.reject(data.messages[0])\r\n\t\t}\r\n\t}\r\n}\r\nexport default profileReducer\r\n","import { Action, applyMiddleware, combineReducers, compose, createStore } from 'redux'\r\nimport authReducer from './authReducer'\r\nimport dialogsReducer from './dialogsReducer'\r\nimport profileReducer from './profileReducer'\r\nimport usersReducer from './usersReducer'\r\nimport thunkMiddleware, { ThunkAction } from 'redux-thunk'\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from './appReducer'\r\nimport chatReduser from './chatReducer'\r\nconst rootReducer = combineReducers({\r\n\tprofilePage: profileReducer,\r\n\tchat: chatReduser,\r\n\tdialogsPage: dialogsReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tform: formReducer,\r\n\tapp: appReducer\r\n})\r\ntype RootReducerType = typeof rootReducer\r\nexport type AppStateType = ReturnType<RootReducerType>\r\nexport type InferActionsTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never\r\nexport type BaseThunkType<A extends Action = Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\nexport default store\r\n","import { AppStateType } from './reduxStore'\r\nexport const selectIsAuth = (state: AppStateType) => {\r\n\treturn state.auth.isAuth\r\n}\r\nexport const selectCurrentUserLogin = (state: AppStateType) => {\r\n\treturn state.auth.login\r\n}\r\nexport const selectCurrentUserId = (state: AppStateType) => {\r\n\treturn state.auth.id\r\n}\r\n","import { Avatar, Button, Col, Layout, Menu, Row } from 'antd'\r\nimport { UserOutlined } from '@ant-design/icons'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { selectCurrentUserId, selectCurrentUserLogin, selectIsAuth } from '../../redux/authSelectors'\r\nimport { logout } from '../../redux/authReducer'\r\nimport { FC } from 'react'\r\nimport { NavLink, useNavigate } from 'react-router-dom'\r\nexport const Header: FC = () => {\r\n\tconst isAuth = useSelector(selectIsAuth)\r\n\tconst login = useSelector(selectCurrentUserLogin)\r\n\tconst id = useSelector(selectCurrentUserId)\r\n\tconst userPhoto = `https://social-network.samuraijs.com/activecontent/images/users/${id}/user-small.jpg`\r\n\tconst navigate = useNavigate()\r\n\tconst dispatch = useDispatch()\r\n\tconst logoutCallback = () => {\r\n\t\tdispatch(logout())\r\n\t}\r\n\tconst { Header } = Layout\r\n\treturn (\r\n\t\t<Header className='header'>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span={18}>\r\n\t\t\t\t\t<Menu theme='dark' mode='horizontal' defaultSelectedKeys={['2']}>\r\n\t\t\t\t\t\t<Menu.Item key='1'>\r\n\t\t\t\t\t\t\t<NavLink to='/users'>Developers</NavLink>\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</Col>\r\n\t\t\t\t{isAuth ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Col span={1}>\r\n\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\tsrc={userPhoto}\r\n\t\t\t\t\t\t\t\talt={login || ''}\r\n\t\t\t\t\t\t\t\ticon={<UserOutlined />}\r\n\t\t\t\t\t\t\t\tonClick={() => navigate('/profile')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={3} style={{ color: 'white' }}>\r\n\t\t\t\t\t\t\t{login || ''}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={2}>\r\n\t\t\t\t\t\t\t<Button onClick={logoutCallback}>Log out</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Col span={6}>\r\n\t\t\t\t\t\t<Button>\r\n\t\t\t\t\t\t\t<NavLink to={'/login'}>Login</NavLink>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t)}\r\n\t\t\t</Row>\r\n\t\t</Header>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/the-codefather.46d5a7a9.png\";","import { ChangeEvent, FC, useEffect, useState } from 'react'\r\nimport style from './ProfileStatus.module.css'\r\ntype PropsType = {\r\n\tstatus: string\r\n\tisOwner: boolean\r\n\tgetUpdateStatus: (status: string) => void\r\n}\r\nconst ProfileStatus: FC<PropsType> = props => {\r\n\tconst [editMode, setEditMode] = useState(false)\r\n\tconst [status, setStatus] = useState(props.status)\r\n\tuseEffect(() => {\r\n\t\tsetStatus(props.status)\r\n\t}, [props.status])\r\n\tconst activateEditMode = () => {\r\n\t\tprops.isOwner && setEditMode(true)\r\n\t}\r\n\tconst deactivateEditMode = () => {\r\n\t\tsetEditMode(false)\r\n\t\tprops.getUpdateStatus(status)\r\n\t}\r\n\tconst onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetStatus(e.currentTarget.value)\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{!editMode && (\r\n\t\t\t\t<div className={style.status} onClick={activateEditMode}>\r\n\t\t\t\t\t{props.isOwner ? (\r\n\t\t\t\t\t\t<i className={style.owner_status}>{props.status || 'Tell us about yourself...'}</i>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<i>{props.status || ''}</i>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{editMode && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder='Tell us about yourself...'\r\n\t\t\t\t\t\tonChange={onStatusChange}\r\n\t\t\t\t\t\tautoFocus={true}\r\n\t\t\t\t\t\tonBlur={deactivateEditMode}\r\n\t\t\t\t\t\tvalue={status}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default ProfileStatus\r\n","import { FC } from 'react'\r\nimport { InjectedFormProps, reduxForm } from 'redux-form'\r\nimport { createField, GetStringKeys, Input, Textarea } from '../../common/FormsControls/FormsControls'\r\nimport style from './ProfileInfo.module.css'\r\nimport style2 from '../../common/FormsControls/FormsControls.module.css'\r\nimport { ProfileType } from '../../../types/types'\r\ntype PropsType = {\r\n\tprofile: ProfileType\r\n}\r\ntype ProfileDataFormValuesTypeKeys = GetStringKeys<ProfileType>\r\nconst ProfileDataForm: FC<InjectedFormProps<ProfileType, PropsType> & PropsType> = ({ handleSubmit, profile, error }) => {\r\n\treturn (\r\n\t\t<form className={style.info} onSubmit={handleSubmit}>\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{createField(Input, 'fullName', 'Full Name', [])}</h1>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<b>About me:</b> {createField<ProfileDataFormValuesTypeKeys>(Textarea, 'aboutMe', 'About me', [])}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<b>Looking for a job:</b>{' '}\r\n\t\t\t\t\t{createField<ProfileDataFormValuesTypeKeys>(Input, 'lookingForAJob', '', [], { type: 'checkbox' })}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<b>My skills:</b>{' '}\r\n\t\t\t\t\t{createField<ProfileDataFormValuesTypeKeys>(\r\n\t\t\t\t\t\tTextarea,\r\n\t\t\t\t\t\t'lookingForAJobDescription',\r\n\t\t\t\t\t\t'My professional skills',\r\n\t\t\t\t\t\t[]\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type='submit'>Save</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t{error && <div className={style2.formSummaryError}>{error}</div>}\r\n\t\t\t</div>\r\n\t\t\t<div className={style.contacts}>\r\n\t\t\t\t<h2>My Contacts:</h2>\r\n\t\t\t\t{Object.keys(profile.contacts).map(key => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={key}>\r\n\t\t\t\t\t\t\t<b>\r\n\t\t\t\t\t\t\t\t{key}: {createField(Input, `contacts.${key}`, key, [])}\r\n\t\t\t\t\t\t\t</b>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\nexport default reduxForm<ProfileType, PropsType>({ form: 'editProfile' })(ProfileDataForm)\r\n","import { ChangeEvent, FC, useState } from 'react'\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport userPhoto from '../../../assets/images/computer-user-icon.png'\r\nimport mainImage from '../../../assets/images/the-codefather.png'\r\nimport style from './ProfileInfo.module.css'\r\nimport ProfileStatus from './ProfileStatus'\r\nimport ProfileDataForm from './ProfileDataForm'\r\nimport { ContactsType, ProfileType } from '../../../types/types'\r\ntype ProfileInfoPropsType = {\r\n\tisOwner: boolean\r\n\tprofile: ProfileType | null\r\n\tstatus: string\r\n\tgetUpdateStatus: (status: string) => void\r\n\tsavePhoto: (file: File) => void\r\n\tsaveProfile: (profile: ProfileType) => Promise<any>\r\n}\r\nconst ProfileInfo: FC<ProfileInfoPropsType> = ({ isOwner, profile, status, getUpdateStatus, savePhoto, saveProfile }) => {\r\n\tconst [editMode, setEditMode] = useState(false)\r\n\tconst activateEditMode = () => {\r\n\t\tsetEditMode(true)\r\n\t}\r\n\tif (!profile) return <Preloader />\r\n\tconst onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tif (e.target.files?.length) savePhoto(e.target.files[0])\r\n\t}\r\n\tconst onSubmit = (formData: ProfileType) => {\r\n\t\tsaveProfile(formData).then(() => {\r\n\t\t\tsetEditMode(false)\r\n\t\t})\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className={style.main_image}>\r\n\t\t\t\t<img src={mainImage} alt='Main cover' />\r\n\t\t\t</div>\r\n\t\t\t<div className={style.profile_wrapper}>\r\n\t\t\t\t<div className={style.avatar}>\r\n\t\t\t\t\t<img src={profile.photos.large || userPhoto} alt='Profile avatar' />\r\n\t\t\t\t\t<div>{isOwner && <input type='file' onChange={onMainPhotoSelected} placeholder='My photo' />}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{editMode ? (\r\n\t\t\t\t\t<ProfileDataForm initialValues={profile} profile={profile} onSubmit={onSubmit} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ProfileData\r\n\t\t\t\t\t\tisOwner={isOwner}\r\n\t\t\t\t\t\tprofile={profile}\r\n\t\t\t\t\t\tstatus={status}\r\n\t\t\t\t\t\tgetUpdateStatus={getUpdateStatus}\r\n\t\t\t\t\t\tactivateEditMode={activateEditMode}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\ntype ProfileDataPropsType = {\r\n\tisOwner: boolean\r\n\tprofile: ProfileType\r\n\tstatus: string\r\n\tgetUpdateStatus: (status: string) => void\r\n\tactivateEditMode: () => void\r\n}\r\nconst ProfileData: FC<ProfileDataPropsType> = ({ isOwner, profile, status, getUpdateStatus, activateEditMode }) => {\r\n\treturn (\r\n\t\t<div className={style.info}>\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{profile.fullName}</h1>\r\n\t\t\t\t<ProfileStatus isOwner={isOwner} status={status} getUpdateStatus={getUpdateStatus} />\r\n\t\t\t\t<div className={style.item}>\r\n\t\t\t\t\t<b>About me:</b> {profile.aboutMe}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={style.item}>\r\n\t\t\t\t\t<b>Looking for a job:</b> {profile.lookingForAJob ? 'Yes' : 'No'}\r\n\t\t\t\t</div>\r\n\t\t\t\t{profile.lookingForAJob && (\r\n\t\t\t\t\t<div className={style.item}>\r\n\t\t\t\t\t\t<b>My skills:</b> {profile.lookingForAJobDescription}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{isOwner && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type='submit' onClick={activateEditMode}>\r\n\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className={style.contacts}>\r\n\t\t\t\t<h2>My Contacts:</h2>\r\n\t\t\t\t{Object.keys(profile.contacts).map(key => {\r\n\t\t\t\t\treturn <Contact key={key} contactTitle={key} contactValue={profile.contacts[key as keyof ContactsType]} />\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\ntype ContactPropsType = {\r\n\tcontactTitle: string\r\n\tcontactValue: string\r\n}\r\nconst Contact: FC<ContactPropsType> = ({ contactTitle, contactValue }) => {\r\n\treturn (\r\n\t\t<div className={style.item}>\r\n\t\t\t<b>{contactTitle}:</b> {contactValue}\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default ProfileInfo\r\n","export default __webpack_public_path__ + \"static/media/the-codefather-2.94b97c11.png\";","import style from './Post.module.css'\r\nimport postImage from '../../../../assets/images/the-codefather-2.png'\r\nimport { FC } from 'react'\r\ntype PropsType = {\r\n\tmessage: string\r\n\tlikesCount: number\r\n}\r\nconst Post: FC<PropsType> = props => {\r\n\treturn (\r\n\t\t<div className={style.item}>\r\n\t\t\t<div>{props.message}</div>\r\n\t\t\t<img src={postImage} alt='Post cover' />\r\n\t\t\t<span>Likes: {props.likesCount}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default Post\r\n","import style from './MyPosts.module.css'\r\nimport { InjectedFormProps, reduxForm } from 'redux-form'\r\nimport { maxLengthCreator, required } from '../../../utils/validators/validators'\r\nimport { createField, GetStringKeys, Textarea } from '../../common/FormsControls/FormsControls'\r\nimport { FC } from 'react'\r\ntype PropsType = {}\r\nexport type MyPostsFormValuesType = {\r\n\tnewPostText: string\r\n}\r\ntype MyPostsFormValuesTypeKeys = GetStringKeys<MyPostsFormValuesType>\r\nconst maxLength100 = maxLengthCreator(100)\r\nconst MyPostsForm: FC<InjectedFormProps<MyPostsFormValuesType, PropsType> & PropsType> = props => {\r\n\treturn (\r\n\t\t<form className={style.new_post} onSubmit={props.handleSubmit}>\r\n\t\t\t<div>{createField<MyPostsFormValuesTypeKeys>(Textarea, 'newPostText', 'New post', [required, maxLength100])}</div>\r\n\t\t\t<div>\r\n\t\t\t\t<button type='submit'>Add post</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\nexport default reduxForm<MyPostsFormValuesType, PropsType>({ form: 'post' })(MyPostsForm)\r\n","import style from './MyPosts.module.css'\r\nimport Post from './Post/Post'\r\nimport { FC } from 'react'\r\nimport { PostType } from '../../../types/types'\r\nimport MyPostsForm, { MyPostsFormValuesType } from './MyPostsForm'\r\nexport type MapPropsType = {\r\n\tposts: Array<PostType>\r\n}\r\nexport type DispatchPropsType = {\r\n\taddPost: (newPostText: string) => void\r\n}\r\nconst MyPosts: FC<MapPropsType & DispatchPropsType> = props => {\r\n\tconst postsElements = props.posts.map(p => <Post key={p.id} message={p.message} likesCount={p.likesCount} />)\r\n\tconst onAddPost = (values: MyPostsFormValuesType) => {\r\n\t\tprops.addPost(values.newPostText)\r\n\t}\r\n\treturn (\r\n\t\t<div className={style.my_posts}>\r\n\t\t\t<h2>My Posts</h2>\r\n\t\t\t<MyPostsForm onSubmit={onAddPost} />\r\n\t\t\t<div className={style.posts}>{postsElements}</div>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default MyPosts\r\n","import { connect } from 'react-redux'\r\nimport { actions } from '../../../redux/profileReducer'\r\nimport { AppStateType } from '../../../redux/reduxStore'\r\nimport MyPosts, { DispatchPropsType, MapPropsType } from './MyPosts'\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn {\r\n\t\tposts: state.profilePage.posts\r\n\t}\r\n}\r\nexport default connect<MapPropsType, DispatchPropsType, {}, AppStateType>(mapStateToProps, { addPost: actions.addPost })(MyPosts)\r\n","import ProfileInfo from './ProfileInfo/ProfileInfo'\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer'\r\nimport { FC } from 'react'\r\nimport { ProfileType } from '../../types/types'\r\ntype PropsType = {\r\n\tisOwner: boolean\r\n\tprofile: ProfileType | null\r\n\tstatus: string\r\n\tgetUpdateStatus: (status: string) => void\r\n\tsavePhoto: (file: File) => void\r\n\tsaveProfile: (profile: ProfileType) => Promise<any>\r\n}\r\nconst Profile: FC<PropsType> = props => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ProfileInfo\r\n\t\t\t\tisOwner={props.isOwner}\r\n\t\t\t\tprofile={props.profile}\r\n\t\t\t\tstatus={props.status}\r\n\t\t\t\tgetUpdateStatus={props.getUpdateStatus}\r\n\t\t\t\tsavePhoto={props.savePhoto}\r\n\t\t\t\tsaveProfile={props.saveProfile}\r\n\t\t\t/>\r\n\t\t\t<MyPostsContainer />\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default Profile\r\n","import Profile from './Profile'\r\nimport { connect } from 'react-redux'\r\nimport { getUserStatus, getUserProfile, savePhoto, saveProfile, getUpdateStatus } from '../../redux/profileReducer'\r\nimport { compose } from 'redux'\r\nimport { Navigate } from 'react-router-dom'\r\nimport { AppStateType } from '../../redux/reduxStore'\r\nimport { ProfileType } from '../../types/types'\r\nimport { Component, ComponentType } from 'react'\r\nimport { withRouter } from '../../hocs/withRouter'\r\ntype MapPropsType = ReturnType<typeof mapStateToProps>\r\ntype DispatchPropsType = {\r\n\trouter: any\r\n\tprofile: ProfileType | null\r\n\tgetUserProfile: (userId: number) => void\r\n\tgetUserStatus: (userId: number) => void\r\n\tgetUpdateStatus: (status: string) => void\r\n\tsavePhoto: (photoFile: File) => void\r\n\tsaveProfile: (profile: ProfileType) => Promise<any>\r\n}\r\ntype PropsType = MapPropsType & DispatchPropsType\r\ntype LocalStateType = { isShowMyProfile: boolean }\r\nclass ProfileContainer extends Component<PropsType, LocalStateType> {\r\n\tconstructor(props: PropsType) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tisShowMyProfile: true\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tconst userIdFromPath = +this.props.router.params.userId\r\n\t\tconst authorisedUserId = this.props.authorisedUserId\r\n\t\tif (userIdFromPath) {\r\n\t\t\tthis.props.getUserProfile(userIdFromPath)\r\n\t\t\tthis.props.getUserStatus(userIdFromPath)\r\n\t\t} else {\r\n\t\t\tif (this.props.isAuth && authorisedUserId) {\r\n\t\t\t\tthis.props.getUserProfile(authorisedUserId)\r\n\t\t\t\tthis.props.getUserStatus(authorisedUserId)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tconst userIdFromPath = +this.props.router.params.userId\r\n\t\tconst authorisedUserId = this.props.authorisedUserId\r\n\t\tconst isShowMyProfile = this.state.isShowMyProfile\r\n\t\tif (isShowMyProfile) {\r\n\t\t\tif (userIdFromPath === authorisedUserId) this.setState({ isShowMyProfile: false })\r\n\t\t\tif (!userIdFromPath && this.props.isAuth && authorisedUserId) {\r\n\t\t\t\tthis.props.getUserProfile(authorisedUserId)\r\n\t\t\t\tthis.props.getUserStatus(authorisedUserId)\r\n\t\t\t\tthis.setState({ isShowMyProfile: false })\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (!this.props.isAuth && !this.props.router.params.userId) return <Navigate to={'/login'} />\r\n\t\tconst userIdFromPath = +this.props.router.params.userId\r\n\t\tconst authorisedUserId = this.props.authorisedUserId\r\n\t\tlet isOwner = false\r\n\t\tif (!userIdFromPath && this.props.isAuth) isOwner = true\r\n\t\telse if (userIdFromPath === authorisedUserId) isOwner = true\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Profile\r\n\t\t\t\t\tprofile={this.props.profile}\r\n\t\t\t\t\tstatus={this.props.status}\r\n\t\t\t\t\tgetUpdateStatus={this.props.getUpdateStatus}\r\n\t\t\t\t\tisOwner={isOwner}\r\n\t\t\t\t\tsavePhoto={this.props.savePhoto}\r\n\t\t\t\t\tsaveProfile={this.props.saveProfile}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn {\r\n\t\tprofile: state.profilePage.profile,\r\n\t\tstatus: state.profilePage.status,\r\n\t\tauthorisedUserId: state.auth.id,\r\n\t\tisAuth: state.auth.isAuth\r\n\t}\r\n}\r\nconst ProfileContainerCompose = compose<ComponentType>(\r\n\twithRouter,\r\n\tconnect(mapStateToProps, { getUserProfile, getUserStatus, getUpdateStatus, savePhoto, saveProfile })\r\n)(ProfileContainer)\r\nexport default ProfileContainerCompose\r\n","import { FC } from 'react'\r\nimport { useLocation, useNavigate, useParams } from 'react-router'\r\nexport function withRouter(Component: FC) {\r\n\tfunction ComponentWithRouterProp(props: any) {\r\n\t\tconst location = useLocation()\r\n\t\tconst navigate = useNavigate()\r\n\t\tconst params = useParams()\r\n\t\treturn <Component {...props} router={{ location, navigate, params }} />\r\n\t}\r\n\treturn ComponentWithRouterProp\r\n}\r\n","import { Component, FC, lazy, Suspense } from 'react'\r\nimport { Route, Routes, Navigate } from 'react-router'\r\nimport { connect } from 'react-redux'\r\nimport { initializeApp } from './redux/appReducer'\r\nimport Preloader from './components/common/Preloader/Preloader'\r\nimport store, { AppStateType } from './redux/reduxStore'\r\nimport { HashRouter } from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\nimport 'antd/dist/reset.css'\r\nimport { LaptopOutlined, NotificationOutlined, UserOutlined } from '@ant-design/icons'\r\nimport { Breadcrumb, Layout, Menu } from 'antd'\r\nimport { Header } from './components/Header/Header'\r\nimport { NavLink } from 'react-router-dom'\r\nimport ProfileContainer from './components/Profile/ProfileContainer'\r\nconst { SubMenu } = Menu\r\nconst { Content, Footer, Sider } = Layout\r\nconst ChatPage = lazy(() => import('./pages/ChatPage/ChatPage').then(module => ({ default: module.ChatPage })))\r\nconst DialogsContainer = lazy(() => import('./components/Dialogs/DialogsContainer'))\r\nconst UsersPage = lazy(() => import('./components/Users/UsersPage').then(module => ({ default: module.UsersPage })))\r\nconst LoginPage = lazy(() => import('./components/Login/LoginPage').then(module => ({ default: module.LoginPage })))\r\ntype MapPropsType = ReturnType<typeof mapStateToProps>\r\ntype DispatchPropsType = {\r\n\tinitializeApp: () => void\r\n}\r\nclass App extends Component<MapPropsType & DispatchPropsType> {\r\n\tcatchAllUnhandledErrors = (e: PromiseRejectionEvent) => {\r\n\t\tconsole.log(`Some error occured: ${e.reason}, ${e.promise}`)\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.props.initializeApp()\r\n\t\twindow.addEventListener('unhandledrejection', this.catchAllUnhandledErrors)\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('unhandledrejection', this.catchAllUnhandledErrors)\r\n\t}\r\n\trender() {\r\n\t\tif (!this.props.initialized) return <Preloader />\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t<Header />\r\n\t\t\t\t<Content style={{ padding: '0 50px' }}>\r\n\t\t\t\t\t<Breadcrumb style={{ margin: '16px 0' }}>\r\n\t\t\t\t\t\t<Breadcrumb.Item>\r\n\t\t\t\t\t\t\t<NavLink to='/profile'>My Page</NavLink>\r\n\t\t\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t\t\t<Breadcrumb.Item>\r\n\t\t\t\t\t\t\t<NavLink to='/chat'>Chat</NavLink>\r\n\t\t\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t\t\t<Breadcrumb.Item>\r\n\t\t\t\t\t\t\t<NavLink to='/dialogs'>Messages</NavLink>\r\n\t\t\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t\t\t<Breadcrumb.Item>\r\n\t\t\t\t\t\t\t<NavLink to='/users'>Developers</NavLink>\r\n\t\t\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t\t</Breadcrumb>\r\n\t\t\t\t\t<Layout className='site-layout-background' style={{ padding: '24px 0' }}>\r\n\t\t\t\t\t\t<Sider className='site-layout-background' width={200}>\r\n\t\t\t\t\t\t\t<Menu mode='inline' style={{ height: '100%' }}>\r\n\t\t\t\t\t\t\t\t<SubMenu key='sub1' icon={<UserOutlined />} title='Profile'>\r\n\t\t\t\t\t\t\t\t\t<Menu.Item key='1'>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink to='/profile'>My Page</NavLink>\r\n\t\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t</SubMenu>\r\n\t\t\t\t\t\t\t\t<SubMenu key='sub2' icon={<NotificationOutlined />} title='Dialogs'>\r\n\t\t\t\t\t\t\t\t\t<Menu.Item key='2'>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink to='/chat'>Chat</NavLink>\r\n\t\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t\t<Menu.Item key='3'>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink to='/dialogs'>Messages</NavLink>\r\n\t\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t</SubMenu>\r\n\t\t\t\t\t\t\t\t<SubMenu key='sub3' icon={<LaptopOutlined />} title='Users'>\r\n\t\t\t\t\t\t\t\t\t<Menu.Item key='4'>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink to='/users'>Developers</NavLink>\r\n\t\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t</SubMenu>\r\n\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t</Sider>\r\n\t\t\t\t\t\t<Content style={{ padding: '0 24px', minHeight: 280 }}>\r\n\t\t\t\t\t\t\t<Suspense fallback={<Preloader />}>\r\n\t\t\t\t\t\t\t\t<Routes>\r\n\t\t\t\t\t\t\t\t\t<Route path='/profile' element={<ProfileContainer />}>\r\n\t\t\t\t\t\t\t\t\t\t<Route path='/profile/:userId' element={<ProfileContainer />} />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route path='/chat' element={<ChatPage />} />\r\n\t\t\t\t\t\t\t\t\t<Route path='/dialogs' element={<DialogsContainer />} />\r\n\t\t\t\t\t\t\t\t\t<Route path='/users' element={<UsersPage pageTitle={'Find Developers'} />} />\r\n\t\t\t\t\t\t\t\t\t<Route path='/login' element={<LoginPage />} />\r\n\t\t\t\t\t\t\t\t\t<Route path='/' element={<Navigate to='/profile' />} />\r\n\t\t\t\t\t\t\t\t\t<Route path='/*' element={<div className='not-found'>404 NOT FOUND</div>} />\r\n\t\t\t\t\t\t\t\t</Routes>\r\n\t\t\t\t\t\t\t</Suspense>\r\n\t\t\t\t\t\t</Content>\r\n\t\t\t\t\t</Layout>\r\n\t\t\t\t</Content>\r\n\t\t\t\t<Footer style={{ textAlign: 'center' }}>Hotims Network ©2023 Created by Nikolay Hotim</Footer>\r\n\t\t\t</Layout>\r\n\t\t)\r\n\t}\r\n}\r\nconst mapStateToProps = (state: AppStateType) => ({ initialized: state.app.initialized })\r\nconst AppContainer = connect(mapStateToProps, { initializeApp })(App)\r\nconst MainApp: FC = () => {\r\n\treturn (\r\n\t\t<HashRouter>\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<AppContainer />\r\n\t\t\t</Provider>\r\n\t\t</HashRouter>\r\n\t)\r\n}\r\nexport default MainApp\r\n","import ReactDOM from 'react-dom'\r\nimport MainApp from './App'\r\nReactDOM.render(<MainApp />, document.getElementById('root'))\r\n","import { FieldValidatorType } from '../../../utils/validators/validators'\r\nimport { FC, ReactNode } from 'react'\r\nimport { Field, WrappedFieldMetaProps, WrappedFieldProps } from 'redux-form'\r\nimport style from './FormsControls.module.css'\r\ntype FormsControlPropsType = {\r\n\tmeta: WrappedFieldMetaProps\r\n\tchildren: ReactNode\r\n}\r\nconst FormsControl: FC<FormsControlPropsType> = ({ meta: { touched, error }, children }) => {\r\n\tconst hasError = touched && error\r\n\treturn (\r\n\t\t<div className={`${style.form_control} ${hasError ? style.error : ''}`}>\r\n\t\t\t<div>{children}</div>\r\n\t\t\t{hasError && <span>{error}</span>}\r\n\t\t</div>\r\n\t)\r\n}\r\nexport const Textarea: FC<WrappedFieldProps> = ({ input, ...props }) => {\r\n\treturn (\r\n\t\t<FormsControl {...props}>\r\n\t\t\t<textarea {...input} {...props} />\r\n\t\t</FormsControl>\r\n\t)\r\n}\r\nexport const Input: FC<WrappedFieldProps> = ({ input, ...props }) => {\r\n\treturn (\r\n\t\t<FormsControl {...props}>\r\n\t\t\t<input {...input} {...props} />\r\n\t\t</FormsControl>\r\n\t)\r\n}\r\nexport function createField<FormKeysType extends string>(\r\n\tcomponent: FC<WrappedFieldProps>,\r\n\tname: FormKeysType,\r\n\tplaceholder: string | null,\r\n\tvalidators: Array<FieldValidatorType>,\r\n\tprops = {},\r\n\ttext = ''\r\n) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Field component={component} name={name} placeholder={placeholder} validate={validators} {...props} />\r\n\t\t\t{text}\r\n\t\t</div>\r\n\t)\r\n}\r\nexport type GetStringKeys<T> = Extract<keyof T, string>\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_image\":\"ProfileInfo_main_image__rUbMJ\",\"profile_wrapper\":\"ProfileInfo_profile_wrapper__3SDP3\",\"avatar\":\"ProfileInfo_avatar__3tYYy\",\"info\":\"ProfileInfo_info__3qaNo\",\"contacts\":\"ProfileInfo_contacts__2ng_-\",\"item\":\"ProfileInfo_item__3Rs7O\"};","import { instance } from './api'\r\ntype GetCaptchaURLResponseType = {\r\n\turl: string\r\n}\r\nexport const securityAPI = {\r\n\tasync getCaptchaURL() {\r\n\t\tconst response = await instance.get<GetCaptchaURLResponseType>('security/get-captcha-url')\r\n\t\treturn response.data\r\n\t}\r\n}\r\n","import { instance, APIResponseType, ResultCodeForCaptchaEnum, ResultCodesEnum } from './api'\r\ntype GetAuthUserResponseDataType = {\r\n\tid: number\r\n\temail: string\r\n\tlogin: string\r\n}\r\ntype LoginResponseDataType = {\r\n\tuserId: number\r\n}\r\nexport const authAPI = {\r\n\tasync getAuthUserData() {\r\n\t\tconst response = await instance.get<APIResponseType<GetAuthUserResponseDataType>>('auth/me')\r\n\t\treturn response.data\r\n\t},\r\n\tasync login(email: string | null, password: string | null, rememberMe = false, captcha: string | null = null) {\r\n\t\tconst response = await instance.post<APIResponseType<LoginResponseDataType, ResultCodesEnum | ResultCodeForCaptchaEnum>>(\r\n\t\t\t'auth/login',\r\n\t\t\t{\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t\trememberMe,\r\n\t\t\t\tcaptcha\r\n\t\t\t}\r\n\t\t)\r\n\t\treturn response.data\r\n\t},\r\n\tasync logout() {\r\n\t\tconst response = await instance.delete('auth/login')\r\n\t\treturn response.data\r\n\t}\r\n}\r\n","import { InferActionsTypes, BaseThunkType } from './reduxStore'\r\nimport { ResultCodesEnum, ResultCodeForCaptchaEnum } from './../api/api'\r\nimport { FormAction, stopSubmit } from 'redux-form'\r\nimport { securityAPI } from '../api/securityAPI'\r\nimport { authAPI } from '../api/authAPI'\r\nconst initialState = {\r\n\tid: null as number | null,\r\n\temail: null as string | null,\r\n\tlogin: null as string | null,\r\n\tisAuth: false,\r\n\tisFetching: false,\r\n\tcaptchaURL: null as string | null\r\n}\r\ntype InitialStateType = typeof initialState\r\nexport const actions = {\r\n\tsetAuthUserData: (id: number | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n\t\t({ type: 'hotims-network/authReduser/SET_AUTH_USER_DATA', payload: { id, email, login, isAuth } } as const),\r\n\tgetCaptchaURLSuccess: (captchaURL: string) =>\r\n\t\t({ type: 'hotims-network/authReduser/GET_CAPTCHA_URL_SUCCESS', payload: { captchaURL } } as const)\r\n}\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\nconst authReduser = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'hotims-network/authReduser/GET_CAPTCHA_URL_SUCCESS':\r\n\t\tcase 'hotims-network/authReduser/SET_AUTH_USER_DATA': {\r\n\t\t\treturn { ...state, ...action.payload }\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\ntype ThunkType = BaseThunkType<ActionsTypes | FormAction>\r\nexport const getAuthUserData = (): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tconst data = await authAPI.getAuthUserData()\r\n\t\tif (data.resultCode === ResultCodesEnum.Success) {\r\n\t\t\tconst { id, email, login } = data.data\r\n\t\t\tdispatch(actions.setAuthUserData(id, email, login, true))\r\n\t\t}\r\n\t}\r\n}\r\nexport const login = (email: string | null, password: string | null, rememberMe: boolean, captcha: string | null): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tconst data = await authAPI.login(email, password, rememberMe, captcha)\r\n\t\tif (data.resultCode === ResultCodesEnum.Success) {\r\n\t\t\tdispatch(getAuthUserData())\r\n\t\t} else {\r\n\t\t\tif (data.resultCode === ResultCodeForCaptchaEnum.CaptchaIsRequired) {\r\n\t\t\t\tdispatch(getCaptchaURL())\r\n\t\t\t}\r\n\t\t\tconst message = data.messages.length > 0 ? data.messages[0] : 'Some error'\r\n\t\t\tdispatch(stopSubmit('login', { _error: message }))\r\n\t\t}\r\n\t}\r\n}\r\nexport const getCaptchaURL = (): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tconst data = await securityAPI.getCaptchaURL()\r\n\t\tconst captchaURL = data.url\r\n\t\tdispatch(actions.getCaptchaURLSuccess(captchaURL))\r\n\t}\r\n}\r\nexport const logout = (): ThunkType => {\r\n\treturn async dispatch => {\r\n\t\tconst data = await authAPI.logout()\r\n\t\tif (data.resultCode === 0) {\r\n\t\t\tdispatch(actions.setAuthUserData(null, null, null, false))\r\n\t\t}\r\n\t}\r\n}\r\nexport default authReduser\r\n"],"sourceRoot":""}