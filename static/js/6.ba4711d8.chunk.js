(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[6],{409:function(e,n,t){e.exports={messages:"ChatPage_messages__16n5R",message:"ChatPage_message__1-f9v"}},419:function(e,n,t){"use strict";t.r(n),t.d(n,"ChatPage",(function(){return d}));var s=t(16),a=t(2),c=t(0),r=t(409),u=t.n(r),i=t(3),o=function(e){var n=e.message;return Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{className:u.a.message,src:n.photo,alt:n.userName})," ",Object(i.jsx)("b",{children:n.userName}),Object(i.jsx)("br",{}),n.message,Object(i.jsx)("hr",{})]})},j=function(e){var n=e.wsChannel,t=Object(c.useState)([]),r=Object(a.a)(t,2),j=r[0],l=r[1];return Object(c.useEffect)((function(){var e=function(e){var n=JSON.parse(e.data);l((function(e){return[].concat(Object(s.a)(e),Object(s.a)(n))}))};return null===n||void 0===n||n.addEventListener("message",e),function(){null===n||void 0===n||n.removeEventListener("message",e)}}),[n]),Object(i.jsx)("div",{className:u.a.messages,children:j.map((function(e,n){return Object(i.jsx)(o,{message:e},n)}))})},l=function(e){var n=e.wsChannel,t=Object(c.useState)(""),s=Object(a.a)(t,2),r=s[0],u=s[1],o=Object(c.useState)("pending"),j=Object(a.a)(o,2),l=j[0],b=j[1];return Object(c.useEffect)((function(){var e=function(){b("ready")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]),Object(i.jsx)("div",{children:Object(i.jsxs)("label",{children:[Object(i.jsx)("textarea",{onChange:function(e){return u(e.currentTarget.value)},value:r}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{disabled:!n||"ready"!==l,type:"submit",onClick:function(){r&&(null===n||void 0===n||n.send(r),u(""))},children:"Send"})]})})},b=function(){var e=Object(c.useState)(null),n=Object(a.a)(e,2),t=n[0],s=n[1];return Object(c.useEffect)((function(){var e,n=function(){setTimeout(t,3e3)},t=function(){var t,a;null===(t=e)||void 0===t||t.removeEventListener("close",n),null===(a=e)||void 0===a||a.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),s(e)};return t(),function(){e.removeEventListener("close",n),e.close()}}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)(j,{wsChannel:t}),Object(i.jsx)(l,{wsChannel:t})]})},d=function(){return Object(i.jsx)(b,{})}}}]);
//# sourceMappingURL=6.ba4711d8.chunk.js.map