(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{405:function(e,t,n){e.exports={user_photo:"Users_user_photo__1UNKm",users_wrapper:"Users_users_wrapper__36uex",user:"Users_user__1MBBk",title:"Users_title__bybcT"}},410:function(e,t,n){e.exports={paginator:"Paginator_paginator__ootZt",pageNumber:"Paginator_pageNumber__YyK91",selectedPage:"Paginator_selectedPage__13AUn"}},421:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersPage",(function(){return E}));var r=n(405),c=n.n(r),i=n(34),s=n(107),a=n(418),u=Object(a.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),o=function(e){return e.usersPage.pageSize},l=function(e){return e.usersPage.currentPage},j=function(e){return e.usersPage.filter},b=function(e){return e.usersPage.totalUsersCount},d=function(e){return e.usersPage.isFetching},f=function(e){return e.usersPage.followingInProgress},O=n(0),p=n(4),m=n(1),g=n(2),h=n(410),x=n.n(h),_=n(6),v=n.n(_),P=n(3),w=function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,c=void 0===r?1:r,i=e.onPageChanged,s=void 0===i?function(){}:i,a=e.portionSize,u=void 0===a?20:a,o=Math.ceil(t/n),l=[],j=Math.ceil(o/u),b=Object(O.useState)(1),d=Object(g.a)(b,2),f=d[0],p=d[1],h=(f-1)*u+1,_=f*u,w=1;w<=o;w++)l.push(w);return Object(P.jsxs)("div",{className:x.a.paginator,children:[f>1&&Object(P.jsx)("button",{type:"submit",onClick:function(){p(f-1)},children:"PREV"}),l.filter((function(e){return e>=h&&e<=_})).map((function(e){return Object(P.jsx)("span",{className:v()(Object(m.a)({},x.a.selectedPage,c===e),x.a.pageNumber),onClick:function(){s(e)},children:e},e)})),j>f&&Object(P.jsx)("button",{type:"submit",onClick:function(){p(f+1)},children:"NEXT"})]})},y=n(203),C=n(39),N=Object(O.memo)((function(e){var t=e.user,n=e.followingInProgress,r=e.follow,i=e.unfollow;return Object(P.jsxs)("div",{className:c.a.user,children:[Object(P.jsxs)("span",{children:[Object(P.jsx)("div",{children:Object(P.jsx)(C.b,{to:"/profile/".concat(t.id),children:Object(P.jsx)("img",{src:null!==t.photos.small?t.photos.small:y.a,alt:"My super avatar",className:c.a.user_photo})})}),Object(P.jsx)("div",{children:t.followed?Object(P.jsx)("button",{type:"submit",disabled:n.some((function(e){return e===t.id})),onClick:function(){return i(t.id)},children:"Unfollow"}):Object(P.jsx)("button",{type:"submit",disabled:n.some((function(e){return e===t.id})),onClick:function(){return r(t.id)},children:"Follow"})})]}),Object(P.jsx)("span",{children:Object(P.jsxs)("span",{children:[Object(P.jsx)("div",{children:t.name}),Object(P.jsx)("div",{children:t.status})]})})]})})),k=n(417),S=Object(O.memo)((function(e){var t=e.onFilterChanged,n=Object(i.d)(j);return Object(P.jsx)("div",{children:Object(P.jsx)(k.c,{enableReinitialize:!0,initialValues:{term:n.term,friend:String(n.friend)},onSubmit:function(e,n){var r=n.setSubmitting,c={term:e.term,friend:"true"===e.friend||"false"!==e.friend&&null};t(c),r(!1)},children:function(e){var t=e.isSubmitting;return Object(P.jsxs)(k.b,{children:[Object(P.jsx)(k.a,{type:"text",name:"term"}),Object(P.jsxs)(k.a,{as:"select",name:"friend",children:[Object(P.jsx)("option",{value:"null",children:"All"}),Object(P.jsx)("option",{value:"true",children:"Followed"}),Object(P.jsx)("option",{value:"false",children:"Unfollowed"})]}),Object(P.jsx)("button",{type:"submit",disabled:t,children:"Find"})]})}})})})),U=n(215),F=n(8),z=n(414),I=Object(O.memo)((function(){var e=Object(i.d)(b),t=Object(i.d)(l),n=Object(i.d)(o),r=Object(i.d)(u),s=Object(i.d)(j),a=Object(i.d)(f),d=Object(i.c)(),m=Object(F.m)(),g=Object(F.k)(),h=function(e){d(Object(U.b)(e))},x=function(e){d(Object(U.d)(e))};return Object(O.useEffect)((function(){var e=z.parse(g.search.substring(1)),r=t,c=s;switch(e.page&&(r=Number(e.page)),e.term&&(c=Object(p.a)(Object(p.a)({},c),{},{term:e.term})),e.friend){case"null":c=Object(p.a)(Object(p.a)({},c),{},{friend:null});break;case"true":c=Object(p.a)(Object(p.a)({},c),{},{friend:!0});break;case"false":c=Object(p.a)(Object(p.a)({},c),{},{friend:!1})}d(Object(U.c)(r,n,c))}),[]),Object(O.useEffect)((function(){var e={};s.term&&(e.term=s.term),null!==s.friend&&(e.friend=String(s.friend)),1!==t&&(e.page=String(t)),m({pathname:"/users",search:z.stringify(e)})}),[m,s,t]),Object(P.jsxs)("div",{className:c.a.users_wrapper,children:[Object(P.jsx)(S,{onFilterChanged:function(e){d(Object(U.c)(1,n,e))}}),Object(P.jsx)(w,{totalItemsCount:e,pageSize:n,currentPage:t,onPageChanged:function(e){d(Object(U.c)(e,n,s))}}),r.map((function(e){return Object(P.jsx)(N,{user:e,followingInProgress:a,follow:h,unfollow:x},e.id)}))]})})),E=Object(O.memo)((function(e){var t=e.pageTitle,n=Object(i.d)(d);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h1",{className:c.a.title,children:t}),n?Object(P.jsx)(s.a,{}):null,Object(P.jsx)(I,{})]})}))}}]);
//# sourceMappingURL=4.0f06b77e.chunk.js.map